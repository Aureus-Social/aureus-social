function ONSSDashMod({s,d}){const ae=s.emps||[];const n=ae.length;const [tab,setTab]=useState("dmfa");const [trim,setTrim]=useState("T1");const mb=ae.reduce((a,e)=>a+(+e.gross||0),0);const onssP=mb*0.2507;const onssT=mb*0.1307;const totalONSS=onssP+onssT;const mbTrim=mb*3;const onssPTrim=onssP*3;const onssTTrim=onssT*3;const totalTrim=totalONSS*3;const redGC=ae.filter(e=>{const a=e.birthDate?Math.floor((Date.now()-new Date(e.birthDate))/(365.25*24*3600*1000)):35;return a<26;}).length;const redGCMontant=redGC*1500;const redStruct=n>0?n*480:0;const totalRed=redGCMontant+redStruct;
return <div><PH title="ONSS - Declaration DmfA" sub={"Declarations trimestrielles - "+n+" travailleurs - Cotisations "+fmt(totalONSS)+"/mois"}/><div style={{display:"grid",gridTemplateColumns:"repeat(6,1fr)",gap:10,marginBottom:18}}>{[{l:"ONSS patronal",v:fmt(onssP),c:"#f87171"},{l:"ONSS personnel",v:fmt(onssT),c:"#f87171"},{l:"Total mensuel",v:fmt(totalONSS),c:"#c6a34e"},{l:"Total trimestre",v:fmt(totalTrim),c:"#fb923c"},{l:"Reductions",v:fmt(totalRed),c:"#4ade80"},{l:"Net ONSS trim.",v:fmt(totalTrim-totalRed),c:"#c6a34e"}].map((k,i)=><div key={i} style={{padding:"12px 14px",background:"rgba(198,163,78,.04)",borderRadius:10,border:"1px solid rgba(198,163,78,.08)"}}><div style={{fontSize:9,color:"#5e5c56",textTransform:"uppercase",letterSpacing:".5px"}}>{k.l}</div><div style={{fontSize:17,fontWeight:700,color:k.c,marginTop:4}}>{k.v}</div></div>)}</div><div style={{display:"flex",gap:6,marginBottom:16}}>{[{v:"dmfa",l:"DmfA Resume"},{v:"cotis",l:"Detail cotisations"},{v:"reductions",l:"Reductions"},{v:"dimona",l:"Dimona"},{v:"calendrier",l:"Calendrier"},{v:"controle",l:"Controle pre-envoi"}].map(t=><button key={t.v} onClick={()=>setTab(t.v)} style={{padding:"8px 16px",borderRadius:8,border:"none",cursor:"pointer",fontSize:12,fontWeight:tab===t.v?600:400,fontFamily:"inherit",background:tab===t.v?"rgba(198,163,78,.15)":"rgba(255,255,255,.03)",color:tab===t.v?"#c6a34e":"#9e9b93"}}>{t.l}</button>)}</div>{tab==="dmfa"&&<div style={{display:"grid",gridTemplateColumns:"1fr 1fr",gap:18}}><C><ST>{"DmfA "+trim+" "+new Date().getFullYear()}</ST><div style={{display:"flex",gap:6,marginBottom:12}}>{["T1","T2","T3","T4"].map(t=><button key={t} onClick={()=>setTrim(t)} style={{padding:"6px 14px",borderRadius:6,border:"none",cursor:"pointer",fontSize:11,fontWeight:trim===t?600:400,fontFamily:"inherit",background:trim===t?"rgba(198,163,78,.15)":"rgba(255,255,255,.03)",color:trim===t?"#c6a34e":"#5e5c56"}}>{t}</button>)}</div><Tbl cols={[{k:"r",l:"Rubrique",b:1,r:r=>r.rub},{k:"m",l:"Mensuel",a:"right",r:r=><span style={{color:"#e8e6e0"}}>{fmt(r.mens)}</span>},{k:"t",l:"Trimestre",a:"right",r:r=><span style={{color:"#fb923c",fontWeight:600}}>{fmt(r.trim)}</span>}]} data={[{rub:"Masse salariale brute",mens:mb,trim:mbTrim},{rub:"ONSS patronal (25.07%)",mens:onssP,trim:onssPTrim},{rub:"ONSS personnel (13.07%)",mens:onssT,trim:onssTTrim},{rub:"Total cotisations",mens:totalONSS,trim:totalTrim},{rub:"Reductions groupes-cibles",mens:totalRed/3,trim:totalRed},{rub:"Reduction structurelle",mens:redStruct/3,trim:redStruct},{rub:"NET A PAYER ONSS",mens:(totalONSS*3-totalRed)/3,trim:totalTrim-totalRed}]}/></C><C><ST>Par travailleur</ST><Tbl cols={[{k:"n",l:"Nom",b:1,r:r=>(r.fn||"")+" "+(r.ln||"")},{k:"b",l:"Brut",a:"right",r:r=><span style={{color:"#c6a34e"}}>{fmt(+r.gross||0)}</span>},{k:"p",l:"ONSS P",a:"right",r:r=><span style={{color:"#f87171"}}>{fmt((+r.gross||0)*0.2507)}</span>},{k:"t",l:"ONSS T",a:"right",r:r=><span style={{color:"#f87171"}}>{fmt((+r.gross||0)*0.1307)}</span>},{k:"to",l:"Total",a:"right",r:r=><span style={{fontWeight:700,color:"#e8e6e0"}}>{fmt((+r.gross||0)*0.3814)}</span>}]} data={ae}/></C></div>}
